version: '3'
services:
  app_first:
    container_name: app_first
    image: iot_app:latest
    tty: true 
    command: -e 2
    networks:
      static-network:
        ipv4_address: 192.168.0.2
  app_second:
    container_name: app_second
    image: iot_app:latest
    tty: true
    command: -e 2
    networks:
      static-network:
        ipv4_address: 192.168.0.3
  app_third:
    container_name: app_third
    image: iot_app:latest
    tty: true
    depends_on:
      - app_first
      - app_second
    command: -e 2 -d 192.168.0.2,192.168.0.3
    networks:
      static-network:
        ipv4_address: 192.168.0.4
networks:
  static-network:
    ipam:
      config:
        - subnet: 192.168.0.0/24